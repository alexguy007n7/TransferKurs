<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransferPile ¬∑ Unlimited</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #f5f7fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 24px;
        }

        .app {
            max-width: 1100px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.05);
            padding: 32px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .title {
            font-size: 28px;
            font-weight: 700;
            color: #0a1e2f;
            letter-spacing: -0.01em;
        }

        .badge {
            background: #e6f0fa;
            color: #0066cc;
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 14px;
            font-weight: 600;
        }

        .upload-section {
            background: #f9fcff;
            border: 2px dashed #cbd5e1;
            border-radius: 16px;
            padding: 28px 24px;
            margin-bottom: 24px;
            transition: 0.2s;
        }

        .upload-section:hover {
            border-color: #3b82f6;
            background: #f0f7ff;
        }

        .file-input-area {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .btn {
            background: white;
            border: 1px solid #d1d9e6;
            padding: 12px 24px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 15px;
            color: #1e293b;
            cursor: pointer;
            transition: 0.15s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #0a1e2f;
            border: none;
            color: white;
            box-shadow: 0 4px 8px rgba(10,30,47,0.1);
        }

        .btn-primary:hover {
            background: #143750;
            transform: translateY(-1px);
        }

        .btn:hover {
            background: #f1f5f9;
        }

        .storage-info {
            margin-top: 20px;
            font-size: 15px;
            color: #33475b;
            background: #f1f5f9;
            padding: 14px 20px;
            border-radius: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
        }

        .file-list {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            padding: 20px;
            margin: 24px 0;
            max-height: 340px;
            overflow-y: auto;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: #fafcfc;
            border-radius: 16px;
            margin-bottom: 10px;
            border-left: 4px solid #3b82f6;
            transition: 0.1s;
        }

        .file-item:hover {
            background: #f1f9ff;
        }

        .file-detail {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .file-name {
            font-weight: 600;
            color: #0f172a;
        }

        .file-meta {
            font-size: 13px;
            color: #5e6f7e;
        }

        .btn-delete {
            background: none;
            border: 1px solid #e2e8f0;
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 500;
            color: #b22234;
            cursor: pointer;
            transition: 0.1s;
        }

        .btn-delete:hover {
            background: #fee2e2;
            border-color: #b91c1c;
        }

        .device-section {
            margin: 28px 0 20px;
        }

        .device-title {
            font-weight: 600;
            margin-bottom: 14px;
            color: #1e293b;
            font-size: 16px;
        }

        .device-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .device-chip {
            background: white;
            border: 1px solid #d1d9e6;
            padding: 10px 22px;
            border-radius: 40px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: 0.1s;
            color: #1e293b;
        }

        .device-chip.active {
            background: #0a1e2f;
            border-color: #0a1e2f;
            color: white;
        }

        .transfer-area {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e2e8f0;
        }

        .status {
            color: #3b82f6;
            font-weight: 500;
            background: #eef2ff;
            padding: 10px 20px;
            border-radius: 40px;
            font-size: 14px;
        }

        .footer {
            margin-top: 32px;
            text-align: center;
            color: #6a7a8a;
            font-size: 13px;
            border-top: 1px solid #edf2f7;
            padding-top: 24px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- HEADER MINIMAL -->
        <div class="header">
            <span class="title">‚àû TransferPile</span>
            <span class="badge">UNLIMITED ¬∑ NO LIMITS</span>
        </div>

        <!-- UPLOAD AREA ‚Äì TIDAK ADA BATASAN -->
        <div class="upload-section" id="dropZone">
            <div class="file-input-area">
                <label for="fileInput" class="btn">
                    <span>üìÅ</span> Pilih File (tanpa batas)
                </label>
                <input type="file" id="fileInput" multiple class="hidden">
                <span style="color: #5e6f7e; font-size: 15px;">atau seret ke sini</span>
            </div>
            <div class="storage-info" id="storageInfo">
                <span>üíæ Penyimpanan: 0 B / ‚àû</span>
                <span>üìÑ File: 0</span>
            </div>
        </div>

        <!-- DAFTAR FILE -->
        <div class="file-list" id="fileListContainer">
            <div style="color: #64748b; text-align: center; padding: 30px;" id="emptyMessage">
                ‚ö° Belum ada file. Upload tak terbatas dimulai.
            </div>
        </div>

        <!-- PILIH PERANGKAT TUJUAN -->
        <div class="device-section">
            <div class="device-title">üéØ Kirim ke perangkat (pilih satu / banyak)</div>
            <div class="device-grid" id="deviceSelector">
                <div class="device-chip active" data-device="pc1">üñ•Ô∏è PC1</div>
                <div class="device-chip" data-device="router">üì∂ Router</div>
                <div class="device-chip" data-device="hp">üì± Android</div>
                <div class="device-chip" data-device="pc2">üíª PC2</div>
                <div class="device-chip" data-device="all">üåê Semua</div>
            </div>
        </div>

        <!-- TRANSFER & STATUS -->
        <div class="transfer-area">
            <button class="btn btn-primary" id="transferBtn">
                üöÄ Transfer file
            </button>
            <span class="status" id="transferStatus">Siap ‚Äì 0 file</span>
        </div>

        <!-- FOOTER PROTOKOL X (MINIMAL) -->
        <div class="footer">
            ‚ö° OXYX ¬∑ PROTOKOL X ¬∑ EKSEKUSI TANPA BATAS
        </div>
    </div>

    <script>
        (function(){
            "use strict";

            // === STATE GLOBAL ===
            let uploadedFiles = [];       // semua file, tanpa batas
            let selectedDevices = ['pc1']; // default

            // === ELEMEN DOM ===
            const fileInput = document.getElementById('fileInput');
            const dropZone = document.getElementById('dropZone');
            const fileListContainer = document.getElementById('fileListContainer');
            const emptyMessage = document.getElementById('emptyMessage');
            const storageInfo = document.getElementById('storageInfo');
            const transferBtn = document.getElementById('transferBtn');
            const transferStatus = document.getElementById('transferStatus');
            const deviceChips = document.querySelectorAll('.device-chip');

            // === UTILS: FORMAT BYTES (HINGGA YOTTABYTE) ===
            function formatBytes(bytes) {
                if (bytes === Infinity || bytes > 1e30) return '‚àû TB';
                if (bytes === 0) return '0 B';
                const sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
                const i = Math.floor(Math.log(bytes) / Math.log(1024));
                return parseFloat((bytes / Math.pow(1024, i)).toFixed(1)) + ' ' + (sizes[i] || '‚àû');
            }

            // === RENDER ULANG DAFTAR FILE DAN STORAGE ===
            function renderFileList() {
                const totalSize = uploadedFiles.reduce((acc, f) => acc + (f.size || 0), 0);
                const fileCount = uploadedFiles.length;

                // Update info storage
                storageInfo.innerHTML = `
                    <span>üíæ Penyimpanan: ${formatBytes(totalSize)} / ‚àû</span>
                    <span>üìÑ File: ${fileCount}</span>
                `;

                // Update status transfer
                transferStatus.innerText = fileCount === 0 ? 'Siap ‚Äì 0 file' : `Siap ‚Äì ${fileCount} file (${formatBytes(totalSize)})`;

                // Kosongkan container
                if (fileCount === 0) {
                    fileListContainer.innerHTML = `<div style="color: #64748b; text-align: center; padding: 30px;">‚ö° Belum ada file. Upload tak terbatas dimulai.</div>`;
                    return;
                }

                // Bangun daftar file
                let html = '';
                uploadedFiles.forEach((file, idx) => {
                    const name = file.name || 'file';
                    const size = formatBytes(file.size || 0);
                    const type = file.type || 'application/octet-stream';
                    html += `
                        <div class="file-item" data-index="${idx}">
                            <div class="file-detail">
                                <span class="file-name">${escapeHtml(name)}</span>
                                <span class="file-meta">${size} ¬∑ ${escapeHtml(type.substring(0, 30))}</span>
                            </div>
                            <button class="btn-delete" data-index="${idx}">‚úï Hapus</button>
                        </div>
                    `;
                });
                fileListContainer.innerHTML = html;

                // Event listener untuk tombol hapus
                fileListContainer.querySelectorAll('.btn-delete').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        const index = parseInt(this.dataset.index);
                        if (!isNaN(index) && index >= 0 && index < uploadedFiles.length) {
                            uploadedFiles.splice(index, 1);
                            renderFileList();
                        }
                        e.stopPropagation();
                    });
                });
            }

            // Escape HTML sederhana untuk keamanan
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // === HANDLE FILE UPLOAD (TAMBAH KE ARRAY) ===
            function addFiles(files) {
                if (!files || files.length === 0) return;
                for (let i = 0; i < files.length; i++) {
                    uploadedFiles.push(files[i]);
                }
                renderFileList();
                // Reset input
                fileInput.value = '';
            }

            // === EVENT: TOMBOL PILIH FILE ===
            fileInput.addEventListener('change', function(e) {
                addFiles(e.target.files);
            });

            // === DRAG & DROP (TANPA BATAS) ===
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.background = '#e6f0fa';
                dropZone.style.borderColor = '#3b82f6';
            });
            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.style.background = '#f9fcff';
                dropZone.style.borderColor = '#cbd5e1';
            });
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.background = '#f9fcff';
                dropZone.style.borderColor = '#cbd5e1';

                const items = e.dataTransfer.items;
                if (items) {
                    const files = [];
                    for (let i = 0; i < items.length; i++) {
                        const item = items[i];
                        if (item.kind === 'file') {
                            const file = item.getAsFile();
                            if (file) files.push(file);
                        }
                    }
                    addFiles(files);
                } else {
                    addFiles(e.dataTransfer.files);
                }
            });

            // === DEVICE SELECTOR ‚Äì TOGGLE DENGAN LOGIKA SEDERHANA ===
            deviceChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    const device = this.dataset.device;

                    if (device === 'all') {
                        // Aktifkan semua chip, nonaktifkan 'all'? Sebaiknya all tetap aktif, tapi kita beri logika: semua aktif, all aktif
                        deviceChips.forEach(c => c.classList.add('active'));
                        selectedDevices = ['pc1', 'router', 'hp', 'pc2', 'all'];
                    } else {
                        // Toggle individual
                        if (this.classList.contains('active')) {
                            // Minimal satu perangkat harus aktif
                            if (selectedDevices.length > 1) {
                                this.classList.remove('active');
                                selectedDevices = selectedDevices.filter(d => d !== device);
                            }
                        } else {
                            this.classList.add('active');
                            selectedDevices.push(device);
                        }

                        // Hapus 'all' dari state dan UI jika ada yang individual aktif
                        const allChip = document.querySelector('.device-chip[data-device="all"]');
                        if (allChip.classList.contains('active')) {
                            allChip.classList.remove('active');
                            selectedDevices = selectedDevices.filter(d => d !== 'all');
                        }
                    }

                    // Pastikan tidak kosong (fallback)
                    if (selectedDevices.length === 0) {
                        document.querySelector('.device-chip[data-device="pc1"]').classList.add('active');
                        selectedDevices = ['pc1'];
                    }
                });
            });

            // === TRANSFER SIMULASI (SEMUA BERFUNGSI) ===
            transferBtn.addEventListener('click', function() {
                if (uploadedFiles.length === 0) {
                    transferStatus.innerText = '‚ö†Ô∏è Tidak ada file untuk dikirim';
                    return;
                }

                const activeDevices = [];
                document.querySelectorAll('.device-chip.active').forEach(chip => {
                    activeDevices.push(chip.dataset.device);
                });

                const totalFiles = uploadedFiles.length;
                const totalSize = uploadedFiles.reduce((acc, f) => acc + (f.size || 0), 0);
                const deviceNames = activeDevices.map(d => {
                    const map = { pc1:'PC1', router:'Router', hp:'Android', pc2:'PC2', all:'Semua' };
                    return map[d] || d;
                }).join(', ');

                transferStatus.innerText = `‚úÖ Transfer ${totalFiles} file (${formatBytes(totalSize)}) ke ${deviceNames} ‚Äî BERHASIL`;
                
                // Notifikasi visual (tanpa alert)
                setTimeout(() => {
                    transferStatus.innerText = `Siap ‚Äì ${totalFiles} file`;
                }, 3500);
            });

            // === INIT: TAMBAHKAN SAMPLE FILE (DEMO, BISA DIHAPUS) ===
            // Hanya sebagai contoh, tidak membatasi. User tetap bebas hapus/upload.
            setTimeout(() => {
                if (uploadedFiles.length === 0) {
                    const sample1 = new File(["dummy"], "sample_video_4k.mp4", { type: "video/mp4" });
                    Object.defineProperty(sample1, 'size', { value: 1.2 * 1024 * 1024 * 1024 }); // 1.2GB
                    const sample2 = new File(["backup"], "server_backup_2026.zip", { type: "application/zip" });
                    Object.defineProperty(sample2, 'size', { value: 8.4 * 1024 * 1024 * 1024 }); // 8.4GB
                    uploadedFiles.push(sample1, sample2);
                    renderFileList();
                }
            }, 50);
        })();
    </script>
</body>
</html>
